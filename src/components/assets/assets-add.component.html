<section id="assets-add-page">
  <h2 mat-dialog-title>Adaugare bun</h2>

  <mat-dialog-content>
    <form fxLayout="column">
      <mat-form-field>
        <input matInput #name name="name" maxlength="50" placeholder="Nume" [(ngModel)]="newAsset.name">
        <mat-hint align="end">{{ name.value.length }} / 50</mat-hint>
      </mat-form-field>

      <mat-form-field>
        <input matInput #description name="description" placeholder="Descriere" [(ngModel)]="newAsset.description">
      </mat-form-field>

      <mat-form-field>
        <input matInput #identifier name="identifier" placeholder="Identificator" [(ngModel)]="newAsset.identifier">
      </mat-form-field>

      <div fxLayout="row" fxLayoutAlign="space-between center">
        <mat-form-field fxFlex="49">
          <mat-select #category name="category" placeholder="Categorie"  [(ngModel)]="newAsset.categoryId" (selectionChange)="getSubcategories(newAsset.categoryId)">
            <mat-option *ngFor="let category of categories" [value]="category.id">{{ category.code }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field fxFlex="49">
          <mat-select #subcategory name="subcategory" placeholder="Subcategorie" [(ngModel)]="newAsset.subcategoryId">
            <mat-option *ngFor="let subcategory of subcategories" [value]="subcategory.id">{{ subcategory.code }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <mat-form-field>
        <mat-select #stage name="stage" placeholder="Stare actuala" [(ngModel)]="newAsset.stageId">
          <mat-option *ngFor="let stage of stages" [value]="stage.id">{{ stage.name }}</mat-option>
        </mat-select>
      </mat-form-field>

      <div fxLayout="row" fxLayoutAlign="space-between center">
        <mat-form-field fxFlex="49">
          <input matInput #quantity name="quantity" placeholder="Cantitate" [(ngModel)]="newAsset.quantity">
        </mat-form-field>

        <mat-form-field fxFlex="49">
          <mat-select #measureUnit name="measureUnit" placeholder="Unitate de masura" [(ngModel)]="newAsset.measureUnit">
            <mat-option *ngFor="let measureUnit of measurements" [value]="measureUnit.value">{{ measureUnit.label }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div fxLayout="row" fxLayoutAlign="space-between center">
        <mat-form-field fxFlex="49">
          <input matInput #estimatedAmount name="estimatedAmount" placeholder="Valoare" [(ngModel)]="newAsset.estimatedAmount">
        </mat-form-field>

        <mat-form-field fxFlex="49">
          <mat-select #estimatedAmountCurrency name="estimatedAmountCurrency" placeholder="Moneda" [(ngModel)]="newAsset.estimatedAmountCurrency">
            <mat-option *ngFor="let estimatedAmountCurrency of currencies" [value]="estimatedAmountCurrency.value">{{ estimatedAmountCurrency.label }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <mat-form-field>
        <textarea matInput #remarks name="remarks" placeholder="Observatii" [(ngModel)]="newAsset.remarks" matTextareaAutosize matAutosizeMinRows="2"></textarea>
      </mat-form-field>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions fxLayout fxLayoutAlign="end center">
    <button mat-button mat-dialog-close>ANULEAZA</button>
    <button mat-raised-button color="primary" (click)="save()">SALVEAZA</button>
  </mat-dialog-actions>
</section>
